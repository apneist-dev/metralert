# Agent

Агент метрик — это клиентское приложение, которое собирает и отправляет метрики на сервер. Он собирает различные метрики системы, включая метрики времени выполнения Go и метрики использования ресурсов системы, и периодически отправляет их на сервер.

## Основные функции

- **Сбор метрик**: Агент собирает различные метрики системы, включая метрики времени выполнения Go (runtime.MemStats) и метрики использования памяти (с помощью gopsutil).
- **Отправка метрик**: Агент может отправлять метрики на сервер по одному или пакетами.
- **Повторные попытки**: Агент использует библиотеку retryablehttp для автоматических повторных попыток отправки метрик в случае ошибок сети.
- **Сжатие данных**: Поддерживает сжатие данных с помощью gzip перед отправкой на сервер.
- **Проверка целостности**: Поддерживает проверку целостности данных с помощью HMAC-хеширования.

## Конфигурация

Агент можно настроить с помощью флагов командной строки или переменных окружения:

| Флаг | Переменная окружения | Описание | Значение по умолчанию |
| :--- | :--- | :--- | :--- |
| `-a` | `ADDRESS` | Адрес сервера | `http://localhost:8080` |
| `-r` | `REPORT_INTERVAL` | Интервал отправки метрик на сервер (в секундах) | `10` |
| `-p` | `POLL_INTERVAL` | Интервал сбора метрик (в секундах) | `2` |
| `-k` | `KEY` | Ключ для HMAC-хеширования |  |
| `-l` | `RATE_LIMIT` | Максимальное количество одновременных запросов к серверу | `5` |

## Запуск

Для запуска агента выполните следующую команду:

```bash
go run cmd/agent/main.go [флаги]
```

Пример:

```bash
go run cmd/agent/main.go -a http://localhost:8080 -r 5 -p 1